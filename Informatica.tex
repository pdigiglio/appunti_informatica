\documentclass[
	a4paper,
	titlepage,
	twoside,
	headinclude=true,
	footinclude=false,
	openright,
%	pdfspacing,
	10pt,
	numbers=noenddot,
%	manychapters,
	draft
%	final
]{scrbook} %BCOR=5mm
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english,italian]{babel}

\usepackage{scrhack}
\usepackage{showkeys}%,showidx}

\usepackage[
	table,
	dvipsnames,
	usenames
]{xcolor}
%\definecolor{halfgray}{gray}{0.55} % chapter numbers will be semi transparent .5 .55 .6 .0
\definecolor{webgreen}{rgb}{0,.5,0}
\definecolor{webbrown}{rgb}{.6,0,0}
\definecolor{Maroon}{cmyk}{0, 0.87, 0.68, 0.32}
\definecolor{RoyalBlue}{cmyk}{1, 0.50, 0, 0}
\definecolor{mygreen}{rgb}{0,0.5,0}

\usepackage[italian]{varioref}

%\input{./classicthesis-config}
%\usepackage{classicthesis}
%\usepackage{arsclassica}

\usepackage[%
%	tracking=true,%
%	babel=true%
]{microtype}


\usepackage{scrpage2}
%\usepackage{emptypage}
\pagestyle{scrheadings}

%\renewcommand{\sfdefault}{iwona}
% per permettere grassetto in \ttseries
%\renewcommand{\ttdefault}{pcr} % font della famiglia Courier
%\renewcommand{\ttdefault}{fvm} % font di ClassicThesis
%\usepackage[urw-garamond]{mathdesign}

\addto\captionsitalian{\renewcommand{\lstlistingname}{Codice}}
\addto\captionsitalian{\renewcommand{\lstlistlistingname}{Elenco dei codici}}
\usepackage{caption}
\captionsetup[table]{skip=\medskipamount, position=top}
\captionsetup[figure]{position=bottom}
\usepackage{MyMathDef}
\usepackage[%
	binary-units=true, % to have \bit and \byte
]{siunitx}
\sisetup{
	detect-family,
	detect-weight,
	range-phrase={ a },
	separate-uncertainty,
%	input-decimal-marker={.},
	output-decimal-marker={,},
	exponent-product = \cdot,
}

\usepackage{enumitem}
\usepackage{mparhack}

\usepackage{indentfirst}
\usepackage{multicol}

\usepackage{eurosym}


\usepackage{tikz,fp,ifthen}
\usetikzlibrary{
	3d, % to have options like yxplan
	patterns, %to have 'pattern' key
	positioning,
	shapes,
	calc,
	backgrounds,
	fit,	
	matrix, % to have matrix in tikz
}
\usepackage{tkz-euclide}
\usetkzobj{all}%arcs}

% for plots
\usepackage{pgfplots}
\pgfplotsset{
	compat = {1.8},
	every axis/.append style={
%		width = .77\columnwidth,
%		error bars/y dir=both,
%		error bars/y explicit,
%		error bars/x dir=both,
%		error bars/x explicit,
%		samples =100,
		axis line style={
			color = black!50,
		},
		every axis label/.append style ={
			color = black!80,
		},
		ylabel style = {
			sloped,
%			rotate=90,
%			anchor=near ticklabel,
		},
		xlabel style = {sloped},
		zlabel style = {sloped},
		every tick label/.append style={
			color = black!60,
		},
		mark size=.3pt,
%		scaled ticks=base 10:-11, %mette * 10 ^{-11} agli assi
		grid = major,
		grid style = {
			dotted,
			color = gray!40
		},
		legend style = {
			shade,
%			draw = none,
			bottom color = gray!10,
			top color = white,
			anchor = north % west
		},
		enlargelimits = .05
	},
	% imposto delle opzioni per i grafici
	cycle list={
		{%
			solid, line width=.8pt,
			color=blue!70,
			opacity=.8,
			mark=*,
			mark options={%
				scale=3,
				fill=yellow!80!blue,
				draw=blue!60
			},
			error bars/error bar style={
				blue!100,
				opacity = .85,
			}
		},
		{%
			line width=.8pt,
			color=orange!100,
			opacity=.8,
			mark=square*,
			mark options={%
				scale=3,
				fill=gray!80!orange,
				draw=red!100
			},
			error bars/error bar style={
				red!100,
				solid,
				opacity = .85
			}
		},
		{%
			line width=.8pt,
			color=green!60,
			opacity=.8,
			mark=triangle*,
			mark options={%
				scale=3,
				fill=green!30!blue,
				opacity=.2,
				draw=green!100
			},
			error bars/error bar style={
				PineGreen!100,
				solid,
				opacity = .85
			}
		},
	},
%	every pin/.append style={
%		font=\footnotesize
%	},
}


%\newcommand{\parencite}{\cite}
% Graffiti as in GKP's book "Concrete Mathematics"
% thanks to Lorenzo Pantieri and Enrico Gregorio
\def\graffito@setup{%
   \slshape\footnotesize%
   \parindent=0pt \lineskip=0pt \lineskiplimit=0pt %
   \tolerance=2000 \hyphenpenalty=300 \exhyphenpenalty=300%
   \doublehyphendemerits=100000%
   \finalhyphendemerits=\doublehyphendemerits}
%\DeclareRobustCommand{\graffito}[1]{\marginpar%
% [\graffito@setup\raggedleft\hspace{0pt}{#1}]%
% {\graffito@setup\raggedright\hspace{0pt}{#1}}}
\let\oldmarginpar\marginpar
\renewcommand{\marginpar}[1]{\oldmarginpar%
 [\graffito@setup\raggedleft\hspace{0pt}{#1}]%
 {\graffito@setup\raggedright\hspace{0pt}{#1}}}

%\renewcommand{\marginpar}{\graffito}

\usepackage{amsmath, amssymb,mathtools}
\usepackage{bm} %bold math, per il neretto matematico: comando \bm

% estensioni
\newcommand{\ext}[1]{\texttt{#1}}
% sistemi operativi
\newcommand{\os}[1]{\textsf{#1}}
\usepackage{tcolorbox}
\newtcbox{\mybox}{%
	nobeforeafter,%
	colframe=gray,
	colback=gray!10!white,
	boxrule=0.3pt,
	arc=2pt,
	boxsep=0pt,
	left=2pt,
	right=2pt,
	top=2pt,
	bottom=2pt,
	tcbox raise base
}
\newcommand{\key}[1]{%\ovalbox{
%\colorbox{lightgray!30}{
\mybox{\sf\small#1}}
%}
%}

% nome algoritmi
\newcommand{\algo}[1]{\textit{#1}}
\newcommand{\lang}[1]{\textsf{#1}}


\newenvironment{sistema}{\left\lbrace\begin{array}{@{}l@{}}}{\end{array}\right.} %definisco l'ambiente "sistema"

\usepackage{multirow}
\usepackage{booktabs}
\usepackage{wrapfig} %immagini incorniciate
\usepackage{subfig}

\usepackage{float}
\floatstyle{ruled}
\newfloat{code}{tbp}{loc}
\floatname{code}{Riquadro}

%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% codici
%==========
%
\usepackage[
	final,
%	savemem
]{listings}
\usepackage{verbatim} % 'verbatim' offre l'ambiente 'comment'
\newcommand{\MyComment}[1]{{\color{darkgray!80}$\langle${\itshape\sffamily{{#1}}}$\rangle$}}
\lstset{
	language=C,%
	keywordstyle={\color{NavyBlue}\bfseries},
	basicstyle=\small\ttfamily,
	backgroundcolor=\color{blue!7},
%	identifierstyle=\color{NavyBlue},
	commentstyle=\color{darkgray!80},%\color{green}\ttfamily,
	stringstyle=\color{PineGreen},
	emphstyle=\color{Maroon}\bfseries,
	emph={NULL,EOF,true,false},
	emphstyle={[2]\color{Brown!70!black}\bfseries},
	emph={[2] EXIT_SUCCESS,EXIT_FAILURE},
	numbers=left,% none
	numberstyle=\scriptsize,%\tiny
	stepnumber=5,
	numbersep=8pt,
	showstringspaces=false,
	breaklines=true,
	frameround=ftff,
	frame=L,
	belowcaptionskip=.75\baselineskip,
	tabsize=4,
	moredelim=[is][\em\sffamily]{|*}{*|},
	escapeinside={£!}{!£},
%	inputencoding=utf8,
%	extendedchars=false,
%	literate={à}{{\'a}}1 {é}{{\'e}}1,
%    escapeinside={/*}{*/}
}
% To have colored numbers in listings
\newtoggle{InString}{}% Keep track of if we are within a string
\togglefalse{InString}% Assume not initally in string
\newcommand*{\ColorIfNotInString}[1]{\iftoggle{InString}{#1}{\color{violet!70!yellow}#1}}%
\newcommand*{\ProcessQuote}[1]{#1\iftoggle{InString}{\global\togglefalse{InString}}{\global\toggletrue{InString}}}%
\lstset{literate=%
    {"}{{{\ProcessQuote{"}}}}1% Disable coloring within double quotes
    {'}{{{\ProcessQuote{'}}}}1% Disable coloring within single quote
    {0}{{{\ColorIfNotInString{0}}}}1
    {1}{{{\ColorIfNotInString{1}}}}1
    {2}{{{\ColorIfNotInString{2}}}}1
    {3}{{{\ColorIfNotInString{3}}}}1
    {4}{{{\ColorIfNotInString{4}}}}1
    {5}{{{\ColorIfNotInString{5}}}}1
    {6}{{{\ColorIfNotInString{6}}}}1
    {7}{{{\ColorIfNotInString{7}}}}1
    {8}{{{\ColorIfNotInString{8}}}}1
    {9}{{{\ColorIfNotInString{9}}}}1
}
\makeatletter
\lst@Key{addtobasicstyle}\relax{%
	\toks@=\expandafter{\lst@basicstyle #1}%
	\edef\lst@basicstyle{\the\toks@}}
\def\calc@current@size{%
	\edef\current@size{%
	\noexpand\fontsize{\f@size}{\f@baselineskip}%
	\noexpand\selectfont}}

\renewcommand\lstinline[1][]{%
	\leavevmode\bgroup %
		\calc@current@size
		\def\lst@boxpos{b}\lsthk@PreSet
		\lstset{flexiblecolumns,addtobasicstyle=\current@size,#1}%
		\lsthk@TextStyle
		\@ifnextchar\bgroup{\afterassignment\lst@InlineG
		\let\@let@token}\lstinline@}
\makeatother
\usepackage{collcell}
\usepackage{listings}

\newcommand{\mymacroA}[1]{\textbf{#1}}
\newcommand{\mymacroB}[1]{\lstinline[mathescape]?#1?}

\newcolumntype{E}{>{\collectcell\mymacroA}l<{\endcollectcell}}
\newcolumntype{F}{>{\collectcell\mymacroB}l<{\endcollectcell}}
% algoritmi
\usepackage[
	slide,	% aggiunge spaziatura verticale per resa migliore
%	nokwfunc,
	algoruled,
	algochapter,
	longend,
	vlined
]{algorithm2e}
% traduco "Algorithm" in italiano
\makeatletter
\renewcommand{\listalgorithmcfname}{Lista degli Algoritmi}%
\renewcommand{\algorithmcfname}{Algoritmo}%
\renewcommand{\algocf@typo}{}%
\renewcommand{\@algocf@procname}{Procedura}
\renewcommand{\@algocf@funcname}{Funzione}
\makeatother
% didascalie in italiano
\addto\captionsitalian{\renewcommand{\lstlistingname}{Codice}}
\addto\captionsitalian{\renewcommand{\lstlistlistingname}{Elenco dei codici}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Indice Analitico
%==========
%
\usepackage{makeidx, multicol}
\makeindex
%%
\let\orgtheindex\theindex
\let\orgendtheindex\endtheindex
\def\theindex{%
	\def\twocolumn{\begin{multicols}{2}}%
	\def\onecolumn{}%
	\clearpage
	\orgtheindex
}
\def\endtheindex{%
	\end{multicols}%
	\orgendtheindex
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Con 'openright' è possibile avere una pagina bianca a fine capitolo; 
% per evitare che in questa pagina siano presenti testatine o piè di pagina:
%==========
%
\makeatletter
\def\cleardoublepage{\clearpage\if@twoside
\ifodd\c@page
\else\hbox{}\thispagestyle{empty}\newpage
\if@twocolumn\hbox{}\newpage\fi\fi\fi}
\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% bibliografia
%=========
%
\usepackage[%
	autostyle,
	italian=guillemets,%
]{csquotes}
\usepackage[%
	style=numeric-comp,%
	useprefix,%
	hyperref,%
	backref,%
	backend=bibtex%
]{biblatex}
\addbibresource{bibliografia.bib}
%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Didascalie
%=========
%
\usepackage{caption}
\captionsetup{%
%	format=hang,%
	format=plain,
	font=small,%
	labelfont={%
		color=darkgray,%
		sf, bf%
	}%
}
\captionsetup[table]{%
%	skip=\medskipamount,%
%	position = top%
}
\captionsetup[figure]{%
%	skip=\medskipamount,
	position = bottom%
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Acronimi
%=========
%
\usepackage[
%	printonlyused,%
	smaller,%
	withpage,%
%	footnote
]{acronym}
% descrizioni degli acronimi giustificate
\makeatletter
\def\bflabel#1{{\textbf{\textsf{#1}}\hfill}}
\renewenvironment{AC@deflist}[1]%
{\ifAC@nolist%
\else%
\begin{list}{}%
{\settowidth{\labelwidth}{\textbf{\textsf{#1}}}%
\setlength{\leftmargin}{\labelwidth}%
\addtolength{\leftmargin}{\labelsep}%
\renewcommand{\makelabel}{\bflabel}}%
\fi}%
{\ifAC@nolist%
\else%
\end{list}%
\fi}%
\makeatother
%
\usepackage{relsize}
\renewcommand*{\acsfont}[1]{\textsmaller{\sf{#1}}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\mail}[1]{\href{mailto:#1}{\texttt{#1}}}

\title{
	{\rmfamily\normalfont\color{darkgray}{Appunti di}}\\
	\color{Maroon}\sffamily\normalfont\textsc{Laboratorio d'Informatica}
}
\subtitle{
	\color{gray} Prof. Bernardinello, Luca\\
	a.a. 2010/2011\\
	4 CFU
}
\author{
	\textsc{
		\href{mailto:p.digiglio@campus.unimib.it}{\color{darkgray}Paolo Di Giglio}
	}
}

\date{
	\small Ultima revisione:\\
	\today
}
% abilita la ricerca di ° a documento finito
\usepackage{textcomp}

%\usepackage{pgfpages}
%\pgfpagesuselayout{2 on 1}[
%	a4paper,%
%	border shrink=1mm,
%	landscape%
%]

\usepackage{hyperref}
\hypersetup{
%	draft,
	final,
	colorlinks=true,
	linktocpage=true,
	pdfstartpage=3,
	pdfstartview=FitV,
	breaklinks=true,
	pdfpagemode=UseNone,
	pageanchor=true,
	pdfpagemode=UseOutlines,%
	plainpages=false,
	bookmarksnumbered,
	bookmarksopen=true,
	bookmarksopenlevel=1,%
	hypertexnames=true,
	pdfhighlight=/O,
	urlcolor=webbrown,
	linkcolor=RoyalBlue,
	citecolor=webgreen,
%	pagecolor=RoyalBlue,%
}

% definisco lo spazio per il testo
%\areaset[current]{\textwidth}{691pt}

% spaziatura europea dopo il punto
\frenchspacing
% frequenza di divisione in sillabe (default=100)
% numero più piccolo -> sillabazione più frequente
\pretolerance=2
\begin{document}

\frontmatter

	\pdfbookmark[0]{Titolo}{chap:titolo}
	\maketitle

	\pdfbookmark[0]{\contentsname}{chap:indice}
	\tableofcontents

	\input{prefazione}

\mainmatter
	\input{lezioni/lezI}
	\input{lezioni/lezII}
	\input{lezioni/lezIII}
	\input{lezioni/lezIV}
	\input{lezioni/lezV}
	\input{lezioni/lezVI}
	\input{lezioni/lezVII}
	\input{lezioni/lezVIII}
	\input{lezioni/lezIX}
	\input{lezioni/lezX}
	\input{lezioni/lezXI}
%	\input{lezioni/esame}
%	\input{lezioni/source}

		\appendix
	\input{lezioni/varie}


\backmatter
	\cleardoublepage
	\listoffigures
%	\addcontentsline{toc}{chapter}{\tocEntry{\listfigurename}}
	\addcontentsline{toc}{chapter}{\listfigurename}

	\cleardoublepage
	\listoftables
%	\addcontentsline{toc}{chapter}{\tocEntry{\listtablename}}
	\addcontentsline{toc}{chapter}{\listtablename}

	\cleardoublepage
	\lstlistoflistings
%	\addcontentsline{toc}{chapter}{\tocEntry{\lstlistlistingname}}
	\addcontentsline{toc}{chapter}{\lstlistlistingname}

	\cleardoublepage
	\input{./acronimi}

	%\clearpage
	\phantomsection
	\cleardoublepage
	\addcontentsline{toc}{chapter}{\indexname}
	\printindex


	\nocite{*}
	\printbibliography
%	\bibliographystyle{plainnat}
%	\bibliography{bibliografia}
%	\addcontentsline{toc}{chapter}{\tocEntry{\bibname}}
	\addcontentsline{toc}{chapter}{\bibname}
\end{document}